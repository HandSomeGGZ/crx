function zoomLevel(){return document.width/jQuery(document).width()}var hideTheScrollBars,cropData,$window=$(window);function exchangeElementStyle(e,t,o){Array.isArray(t)||(t=[t]),t.forEach(function(t){e.hasOwnProperty("style_"+t)||(e["style_"+t]=e.style.getPropertyValue(t)||null,e["style_"+t+"_priority"]=e.style.getPropertyPriority(t)||null),e.style.setProperty(t,o,"important")})}function restoreElementStyle(e,t){Array.isArray(t)||(t=[t]),t.forEach(function(t){e.hasOwnProperty("style_"+t)&&(e.style.removeProperty(t),e.style.setProperty(t,e["style_"+t],e["style_"+t+"_priority"]))})}var page={isWidthScroll:!1,isHeightScroll:!1,scrollLeft:0,scrollTop:0,windowWidth:0,windowHeight:0,documentWidth:0,documentHeight:0,currentX:0,cropData:null,currentY:0,scrollBarWidth:0,iframe:null,elm:null,fixedTopElements:[],fixedBottomElements:[],setVars:function(e){e.y2>document.height&&(e.y2=document.height),e.x2>document.width&&(e.x2=document.width),page.isWidthScroll=page.checkWidthScroll(),page.isHeightScroll=page.checkHeightScroll(),page.windowWidth=window.innerWidth,page.documentWidth=document.body.scrollWidth,page.documentHeight=document.body.scrollHeight,page.windowHeight=window.innerHeight,page.currentX=0,page.currentY=0,e&&e.y1>$(window).scrollTop()&&e.x1>$(window).scrollLeft()?(page.currentY=$(window).scrollTop(),page.currentX=$(window).scrollLeft()):(page.currentX=e.x1,page.currentY=e.y1)},scrollToCurrent:function(){0==page.currentX&&0==page.currentY||page.preparePage("before"),$(window).scrollTop(page.currentY),$(window).scrollLeft(page.currentX)},saveScrollPos:function(){page.scrollLeft=$(window).scrollLeft(),page.scrollTop=$(window).scrollTop()},restoreScrollPos:function(){page.currentX=page.scrollLeft,page.currentY=page.scrollTop,page.scrollToCurrent()},computeNextScreen:function(){return!(cropData&&page.currentX+page.windowWidth>cropData.x2&&page.currentY+page.windowHeight>cropData.y2)&&(page.currentX+page.windowWidth<page.documentWidth?(page.currentX+=page.windowWidth,!0):(page.currentX=0,!(page.currentY+page.windowHeight>=page.documentHeight)&&(page.currentY+=page.windowHeight,!0)))},checkWidthScroll:function(){return document.body.clientWidth<document.body.scrollWidth},checkHeightScroll:function(){return document.body.clientHeight<document.body.scrollHeight},preparePage:function(e){"www.facebook.com"===document.location.hostname&&(page.elm||(page.elm=$("div#pagelet_sidebar").add(".uiContextualDialogPositioner").add(".fbFlyoutDialog").add("div#pagelet_bluebar").add("div#pagelet_dock").add("div#pagelet_channel").add("div#rightCol"),"before"===e&&page.elm.data("prepareHide",!0).css("visibility","hidden")),"after"===e&&(page.elm.data("prepareHide",null).css("visibility",""),page.elm=null))},enableScrollbar:function(e){if(e)try{hideTheScrollBars&&restoreElementStyle(document.body,["overflow-x","overflow-y"])}catch(e){}else try{exchangeElementStyle(document.body,["overflow-x","overflow-y"],"hidden"),hideTheScrollBars=!0}catch(e){}},fixedElementCheck:function(){"fixed"===document.defaultView.getComputedStyle(document.body)["background-attachment"]&&exchangeElementStyle(document.body,["background-attachment"],"initial");for(var e,t=document.createNodeIterator(document.documentElement,NodeFilter.SHOW_ELEMENT,null,!1),o=$window.height();e=t.nextNode();){var n=document.defaultView.getComputedStyle(e,"");if(!n)return;"fixed"===n.getPropertyValue("position")&&($(e).position().top<o/2?(page.fixedTopElements.indexOf(e)<0&&page.fixedTopElements.push(e),document.body.scrollHeight<2*o&&exchangeElementStyle(e,["position"],"absolute")):page.fixedBottomElements.indexOf(e)<0&&page.fixedBottomElements.push(e))}},fixedElementRestore:function(){page.fixedTopElements.forEach(function(e){restoreElementStyle(e,["display","position"])}),page.fixedBottomElements.forEach(function(e){restoreElementStyle(e,["display","position"])}),restoreElementStyle(document.body,["background-attachment"]),page.fixedTopElements.length=0,page.fixedBottomElements.length=0},hideFixedElement:function(e){("top"==e?page.fixedTopElements:page.fixedBottomElements).forEach(function(e){exchangeElementStyle(e,["display"],"none")})},showFixedElement:function(e){("top"==e?page.fixedTopElements:page.fixedBottomElements).forEach(function(e){restoreElementStyle(e,["display"])})},restore:function(){page.enableScrollbar(!0),page.preparePage("after"),page.showSb(),page.restoreScrollPos(),setTimeout(page.fixedElementRestore,1e3)},hideSb:function(){$(".ws_toolbar_top").hide()},showSb:function(){$(".ws_toolbar_top").show()},checkPageIsOnlyEmbedElement:function(){for(var e=document.body.children,t=!1,o=0;o<e.length;o++){var n=e[o].tagName;if("OBJECT"==n||"EMBED"==n||"VIDEO"==n||"SCRIPT"==n)t=!0;else if("none"!=e[o].style.display){t=!1;break}}return t},onRequest:function(e,t,o){if("checkExist"!=e.type){if(e.start){page.saveScrollPos();var n={x1:0,x2:32768,y1:0,y2:32765,scrollTop:$(window).scrollTop(),scrollLeft:$(window).scrollLeft()};e.scroll||(n.x1=window.scrollX,n.y1=window.scrollY,n.x2=window.innerWidth+n.x1,n.y2=window.innerHeight+n.y1),cropData=$.extend(n,e.cropData),maxDimensionForCanvas=Math.pow(2,15)-100,cropData.y2-cropData.y1>maxDimensionForCanvas&&(cropData.y2=cropData.y1+maxDimensionForCanvas),cropData.x2-cropData.x1>maxDimensionForCanvas&&(cropData.x2=cropData.x1+maxDimensionForCanvas)}if("takeCapture"==e.type){for(var r={},i=0;i<document.getElementsByTagName("meta").length;i++){var a=document.getElementsByTagName("meta")[i];a.getAttribute("name")&&"description"==a.getAttribute("name").toLowerCase()&&(r.description=a.getAttribute("content"))}if(e.start){dectect_zoom(),page.setVars(cropData),page.hideSb(),e.scroll&&!e.showScrollBar&&page.enableScrollbar(!1);try{document.getElementById("presence").style.display="none",window.setTimeout("document.getElementById('presence').style.display=''",1e4)}catch(e){}try{document.getElementById("navi-bar").style.display="none",window.setTimeout("document.getElementById('navi-bar').style.display=''",1e4)}catch(e){}e.scroll&&e.processFixedElements&&page.fixedElementCheck()}page.scrollToCurrent(),e.scroll&&e.processFixedElements&&setTimeout(function(){page.fixedElementCheck(),e.start?page.hideFixedElement("bottom"):page.hideFixedElement("top"),r.finish&&(page.showFixedElement("bottom"),$(window).scrollTop()<$window.height()&&page.showFixedElement("top"))},50),page.iframe?(r.top=page.iframe.contentdocumentbody().scrollTop-(cropData?cropData.y1*zoomLevel():0),r.left=page.iframe.contentdocumentbody().scrollLeft-(cropData?cropData.x1*zoomLevel():0)):(r.top=parseInt($(window).scrollTop()*zoomLevel()-cropData.y1*zoomLevel(),10),r.left=parseInt($(window).scrollLeft()*zoomLevel()-cropData.x1*zoomLevel(),10)),r.finish=!e.scroll||!page.computeNextScreen(),r.finish&&(r.width=parseInt(cropData.x2-cropData.x1,10)*zoomLevel(),r.height=parseInt(cropData.y2-cropData.y1,10)*zoomLevel(),r.url=document.location.toString(),r.title=document.title,r.description=$("meta[name=description]").attr("content"),window.onfinish&&window.onfinish()),o(r)}"finish"==e.type&&page.restore()}else o()},docKeyDown:function(e){27==e.keyCode&&(page.restore(),chrome.runtime.sendMessage({data:"stopNow"}))},bindEvents:function(){document.addEventListener("keydown",page.docKeyDown)}};function dectect_zoom(){!function(e,t,o){"use strict";"undefined"!=typeof module&&module.exports?module.exports=o():"function"==typeof define&&define.amd?define(function(){return o()}):e[t]=o()}(window,"detectZoom",function(){var e=function(){return window.devicePixelRatio||1},t=function(){return{zoom:1,devicePxPerCssPx:1}},o=function(){var t=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:t,devicePxPerCssPx:t*e()}},n=function(){var t=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:t,devicePxPerCssPx:t*e()}},r=function(){var t=(90==Math.abs(window.orientation)?screen.height:screen.width)/window.innerWidth;return{zoom:t,devicePxPerCssPx:t*e()}},i=function(){var t=function(e){return e.replace(/;/g," !important;")},o=document.createElement("div");o.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",o.setAttribute("style",t("font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;"));var n=document.createElement("div");n.setAttribute("style",t("width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;")),n.appendChild(o),document.body.appendChild(n);var r=1e3/o.clientHeight;return r=Math.round(100*r)/100,document.body.removeChild(n),{zoom:r,devicePxPerCssPx:r*e()}},a=function(){var e=l("min--moz-device-pixel-ratio","",0,10,20,1e-4);return{zoom:e=Math.round(100*e)/100,devicePxPerCssPx:e}},d=function(){return{zoom:a().zoom,devicePxPerCssPx:e()}},c=function(){var t=window.top.outerWidth/window.top.innerWidth;return{zoom:t=Math.round(100*t)/100,devicePxPerCssPx:t*e()}},l=function(e,t,o,n,r,i){var a,d,c,l;window.matchMedia?a=window.matchMedia:(d=document.getElementsByTagName("head")[0],c=document.createElement("style"),d.appendChild(c),(l=document.createElement("div")).className="mediaQueryBinarySearch",l.style.display="none",document.body.appendChild(l),a=function(e){c.sheet.insertRule("@media "+e+"{.mediaQueryBinarySearch {text-decoration: underline} }",0);var t="underline"==getComputedStyle(l,null).textDecoration;return c.sheet.deleteRule(0),{matches:t}});var s=function o(n,r,d){var c=(n+r)/2;return 0>=d||i>r-n?c:a("("+e+":"+c+t+")").matches?o(c,r,d-1):o(n,c,d-1)}(o,n,r);return l&&(d.removeChild(c),document.body.removeChild(l)),s},s=function(){var e=t;return isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?e=n:"orientation"in window&&"string"==typeof document.body.style.webkitMarquee?e=r:"string"==typeof document.body.style.webkitMarquee?e=i:navigator.userAgent.indexOf("Opera")>=0?e=c:window.devicePixelRatio?e=d:a().zoom>.001&&(e=a):e=o,e}();return{zoom:function(){return s().zoom},device:function(){return s().devicePxPerCssPx}}}),document.width=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth),document.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),zoomLevel=function(){return devicePixelRatio}}if(chrome.runtime.onMessage.addListener(page.onRequest),chrome.runtime.sendMessage({data:"isEnableShortCuts"},page.bindEvents),location.href.match("https://www.uploady.com/oauth2/blank")){var url=window.location.href,params="?",index=url.indexOf(params);index>-1&&(params=url.substring(index)),params+="&from="+encodeURIComponent(url);var redirect=chrome.extension.getURL("oauth2/oauth2.html")+params;chrome.runtime.sendMessage({data:"createTabAndCloseCurrent",url:redirect})}