function pseudoRandomId(){return Array.from({length:4},()=>Math.random().toString(36).substring(7)).join("")}function transformDropToUploadyFile(r){return{share_url:r.shortlink}}var droplr=function(r,e){var n,t;return{init:a,upload:o(function(n){return r.ajax({type:"POST",contentType:"image/png",url:`${e.apiUrl}/files?filename=${t=n.filename,`${t}`.replace(/[^\w\s\d\.\-\!\?]/g,"")}`,processData:!1,data:n.blob,headers:u()}).then(function(r){return chrome.tabs.create({url:r.shortlink}),{files:[transformDropToUploadyFile(r)]}},c);var t}),isConnected:function(){return!!n},isTemporary:()=>{},getExpirationDate:()=>{},connectUser:o(function(){return r.ajax({type:"GET",url:`${e.apiUrl}/account`,headers:u()}).then(function(r){return n=r,i(),r},c)}),disconnectUser:function(){localStorage.droplr="",s()},getUser:function(){return n},getFolderUrl:()=>{}};function o(r){return function(){return a().then(r.bind.apply(r,[null].concat(Array.prototype.slice.call(arguments))))}}function a(){return s(),n?r.Deferred().resolve().promise():(t=pseudoRandomId(),r.ajax({type:"POST",url:`${e.apiUrl}/account`,data:{email:`screenshot-extension-${pseudoRandomId()}@droplr-lite.com`,password:t},headers:{"X-User-Agent":l()}}).then(function(r){return n=r,i(),r},c)).then(a)}function i(){localStorage.setItem("droplr",JSON.stringify({liteUser:n,password:t}))}function s(){var r=JSON.parse(localStorage.droplr||null)||{};return n=r.liteUser,t=r.password,!!r}function u(){return{Authorization:`Basic ${btoa(n.email+":"+t)}`,"X-User-Agent":l()}}function l(){return`ScreenshotExtension/${chrome.runtime.getManifest().version}`}function c(e){return alert("Request failed, if this is error happened more than once, please contact support"),r.Deferred().reject(e).promise()}}(jQuery,settings.droplr);