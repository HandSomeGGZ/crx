var defaultPlugins=[{name:"Save To Disk",key:"save",dataType:"image",onclick:function(e){String.prototype.twoDigits=function(){return this.replace(/^(.)$/,"0$1")};var a,t=e.image_blob(),i=URL.createObjectURL(t);a=(a=e.page_title||e.page_url).replace(/[%&\(\)\\\/\:\*\?\"\<\>\|\/\]]/g," "),a+=".png";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!0,!1,!1,0,null),$("<a></a>").appendTo(document.body).attr({href:i,download:a})[0].dispatchEvent(n)}},{name:"Print",key:"print",dataType:"image",onclick:function(e){var a=e.image_base64();new Dialog({html:'<img style=border:none;max-width:100% src="data:image/jpg;base64,'+a+'">'}).print()}},{name:"Copy",key:"copy",dataType:"image",onclick:function(e){var a=e.image_base64();mod=$('<div style="text-align:center;z-index:100000;position:fixed;width:100%;top:0%"><span style="display:inline-block;background:rgba(0, 0, 0, 0.7);padding:10px;border:1px solid #aaaaab"><h3 style="color:#fff">Right click the image and choose "Copy image"</h3><img style="max-width:80%;max-height:80%;margin: 10px; border:#ccc 1px solid"></span></div>'),$("img",mod).attr("src","data:image/png;base64,"+a),mod.appendTo(document.body),window.setTimeout(function(){$(document).one("click",function(){mod.remove()})},0)}},{name:"Save online",key:"uploady",dataType:"image",editorDefault:!0,onclick:function(e){var a=$(e.event.delegateTarget);if(!a.hasClass("loading")){a.prop("disabled"),a.addClass("loading"),String.prototype.twoDigits=function(){return this.replace(/^(.)$/,"0$1")};var t,i=e.image_blob();t=(t=e.page_title||e.page_url).replace(/[%&\(\)\\\/\:\*\?\"\<\>\|\/\]]/g," "),t+=".png",chrome.runtime.sendMessage({data:"upload",filename:t,objectURL:URL.createObjectURL(i)},function(t){if(a.addClass("done"),a.removeClass("loading"),a.prop("disabled",!1),t&&!t.error){var i=t.files.pop().share_url;if(a.hasClass("expand-url")){var n=a.siblings(".url-share");return n.length||(n=$("<input class='url-share' readonly type='text'/>"),a.after(n)),n.val(i),n.animate({"margin-right":"0"}),void n.click(function(){n.select(),n.addClass("copied"),chrome.runtime.sendMessage({data:"copyText",text:i})})}var o=e.page_title.replace(/[\"&<>]/g,function(e){return chr[e]});new Dialog({html:'<textarea autoselect class="input-block" id="share_url">'+i+'</textarea><a href="#share_url" class="button link-copy" target="_blank"><i></i> Copy</a><br/> <textarea autoselect class="input-block" id="share_html"><a href="'+i+'">'+o+'</a></textarea><a href="#share_html" class="button link-copy" target="_blank"><i></i> Copy</a><br/> <textarea autoselect class="input-block" id="share_md">['+o+"]("+i+')</textarea><a href="#share_md" class="button link-copy" target="_blank"><i></i> Copy</a>',title:"Screenshot is ready. Go ahead, share it!",ui:"dialog"}).show()}})}}}];