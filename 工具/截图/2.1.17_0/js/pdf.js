function createPDF(){var t,e=595.28,a=841.89,c=0;editor.createLastCanvas(),dataUrl=$("canvas").last()[0].toDataURL(),dataUrl=dataUrl.slice(22);var n=new Image;n.src="data:image/png;base64,"+dataUrl,n.onload=function(){aspect=.5,n.width*aspect<e-40?orien="p":(orien="l",x=e,e=a,a=x,n.width*aspect<e-40||(aspect=(e-40)/n.width,t=document.createElement("canvas"),console.log("realAspect:"+aspect))),t=document.createElement("canvas");for(var i=new jsPDF(orien,"pt");c<n.height;)0!=c&&i.addPage(),ctx=t.getContext("2d"),t.width=n.width,t.height=(a-20)/aspect,ctx.rect(0,0,t.width,t.height),ctx.fillStyle="white",ctx.fill(),ctx.drawImage(n,0,c,n.width,n.height-c,0,0,n.width,n.height-c),x=t.toDataURL("image/jpeg",1),i.addImage(x,"JPEG",10,10,t.width*aspect,t.height*aspect),c+=t.height;for(var d=[],r=i.output(),o=0;o<r.length;o++)d.push(r.charCodeAt(o));var h=new Blob([new Uint8Array(d)],{type:"image/jpeg"}),s=URL.createObjectURL(h),l=(screenshot.title||screenshot.url)+".pdf",p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!0,!1,!1,0,null),$("<a></a>").appendTo(document.body).attr({href:s,download:l})[0].dispatchEvent(p)}}